<div class="flex h-screen bg-background-dark overflow-hidden">
    <!-- Sidebar -->
    <aside [class.w-64]="sidebarOpen" [class.w-20]="!sidebarOpen"
        class="bg-surface-dark border-r border-border-dark flex flex-col transition-all duration-300 ease-in-out">
        <!-- Logo/Brand -->
        <div class="h-16 flex items-center justify-between px-4 border-b border-border-dark">
            <div *ngIf="sidebarOpen" class="flex items-center gap-2">
                <img src="/assets/images/logoBlanco.png" alt="Soluciones Mecánicas" class="h-8 w-auto">
                <span class="text-white text-lg font-brand uppercase tracking-widest">
                    SOLUCIONES MECANICAS
                </span>
            </div>
            <div *ngIf="!sidebarOpen" class="w-full flex justify-center">
                <img src="/assets/images/logoBlanco.png" alt="MotoFix" class="h-8 w-auto">
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="flex-1 py-6 overflow-y-auto scrollbar-hide">
            <ul class="space-y-2 px-3">
                <li *ngFor="let item of menuItems">
                    <a [routerLink]="item.path" routerLinkActive="bg-primary/10 text-primary border-primary"
                        class="flex items-center gap-3 px-3 py-3 rounded-lg text-text-secondary hover:bg-border-dark hover:text-white transition-all border border-transparent">
                        <span class="material-symbols-outlined text-xl">{{ item.icon }}</span>
                        <span *ngIf="sidebarOpen" class="font-medium text-sm">{{ item.label }}</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- User Section -->
        <div class="border-t border-border-dark p-4">
            <div *ngIf="currentUser" class="flex items-center gap-3">
                <div
                    class="w-10 h-10 rounded-full bg-primary/20 text-primary flex items-center justify-center flex-shrink-0">
                    <span class="material-symbols-outlined text-xl">person</span>
                </div>
                <div *ngIf="sidebarOpen" class="flex-1 min-w-0">
                    <p class="text-white text-sm font-medium truncate">{{ currentUser.firstName }} {{
                        currentUser.lastName }}</p>
                    <p class="text-text-secondary text-xs truncate">{{ currentUser.email }}</p>
                </div>
            </div>

            <!-- Logout Button -->
            <button (click)="logout()" [class.justify-center]="!sidebarOpen"
                class="mt-3 w-full flex items-center gap-2 px-3 py-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-all">
                <span class="material-symbols-outlined text-lg">logout</span>
                <span *ngIf="sidebarOpen" class="text-sm font-medium">Cerrar Sesión</span>
            </button>
        </div>

        <!-- Toggle Sidebar Button (Desktop) -->
        <button (click)="toggleSidebar()"
            class="hidden md:flex absolute -right-3 top-20 w-6 h-6 bg-surface-dark border border-border-dark rounded-full items-center justify-center hover:bg-border-dark transition-all">
            <span class="material-symbols-outlined text-sm text-text-secondary">{{ sidebarOpen ? 'chevron_left' :
                'chevron_right' }}</span>
        </button>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col overflow-hidden">
        <!-- Top Bar (Mobile) -->
        <header
            class="md:hidden h-16 bg-surface-dark border-b border-border-dark flex items-center justify-between px-4">
            <button (click)="toggleSidebar()" class="text-white">
                <span class="material-symbols-outlined">menu</span>
            </button>
            <span class="text-white font-bold text-lg">MotoFix</span>
            <div class="w-6"></div> <!-- Spacer -->
        </header>

        <!-- Content Wrapper -->
        <div class="flex-1 overflow-y-auto">
            <router-outlet></router-outlet>
        </div>
    </main>

    <!-- Mobile Sidebar Overlay -->
    <div *ngIf="sidebarOpen" (click)="toggleSidebar()" class="md:hidden fixed inset-0 bg-black/50 z-40"></div>
</div>